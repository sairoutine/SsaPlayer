!function t(i,e,n){function r(s,a){if(!e[s]){if(!i[s]){var p="function"==typeof require&&require;if(!a&&p)return p(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=e[s]={exports:{}};i[s][0].call(l.exports,function(t){var e=i[s][1][t];return r(e?e:t)},l,l.exports,t,i,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,i,e){"use strict";var n={iPartNo:0,iImageNo:1,iSouX:2,iSouY:3,iSouW:4,iSouH:5,iDstX:6,iDstY:7,iDstAngle:8,iDstScaleX:9,iDstScaleY:10,iOrgX:11,iOrgY:12,iFlipH:13,iFlipV:14,iAlpha:15,iBlend:16,iVertULX:17,iVertULY:18,iVertURX:19,iVertURY:20,iVertDLX:21,iVertDLY:22,iVertDRX:23,iVertDRY:24,blendOperations:["source-over","source-over","lighter","source-over"]};i.exports=n},{}],2:[function(t,i,e){"use strict";function n(t,i){this._ssaData=t,this._imageList=i,this._partsMap={};for(var e=0;e<t.parts.length;e++)this._partsMap[t.parts[e]]=e}var r=t("./SsPoint"),o=t("./constant"),s=!1,a=0;n.prototype.getFPS=function(){return this._ssaData.fps},n.prototype.getFrameCount=function(){return this._ssaData.ssa.length},n.prototype.getParts=function(){return this._ssaData.parts},n.prototype.getPartsMap=function(){return this._partsMap},n.prototype.drawFunc=function(t,i,e,n,s,p,h,l,u){for(var c=this._ssaData.ssa[i],g=0;g<c.length;g++){var _=c[g],m=_.length,f=_[o.iPartNo];if(!a||f===a){var y=this._imageList.getImage(_[o.iImageNo]),S=_[o.iSouX],d=_[o.iSouY],v=_[o.iSouW],w=_[o.iSouH],D=e+_[o.iDstX]*l,L=n+_[o.iDstY]*u,x=(_[o.iDstX],_[o.iDstY],h[f]);if(x.x=D,x.y=L,0>=v||0>=w)return;var F=_[o.iDstAngle],V=_[o.iDstScaleX],P=_[o.iDstScaleY],C=m>o.iOrgX?_[o.iOrgX]:0,X=m>o.iOrgY?_[o.iOrgY]:0,Y=m>o.iFlipH&&0!==_[o.iFlipH]?-1:1,T=m>o.iFlipV&&0!==_[o.iFlipV]?-1:1,k=m>o.iAlpha?_[o.iAlpha]:1,R=m>o.iBlend?_[o.iBlend]:0,B=document.createElement("canvas"),I=v>w?v:w;B.width=I,B.height=I;var U=B.getContext("2d");U.globalCompositeOperation=o.blendOperations[R],U.globalAlpha=k,U.translate(v/2,w/2),U.rotate(-F),U.scale(V,P),U.translate(0,0),U.scale(Y,T),U.drawImage(y,S,d,v,w,-v/2,-w/2,v,w);var A=D-C*l,O=L-X*u,N=[m>o.iVertULX?_[o.iVertULX]:0,m>o.iVertULY?_[o.iVertULY]:0,m>o.iVertURX?_[o.iVertURX]:0,m>o.iVertURY?_[o.iVertURY]:0,m>o.iVertDLX?_[o.iVertDLX]:0,m>o.iVertDLY?_[o.iVertDLY]:0,m>o.iVertDRX?_[o.iVertDRX]:0,m>o.iVertDRY?_[o.iVertDRY]:0],b=[new r(A+N[0],O+N[1]),new r(I*l+A+N[2],O+N[3]),new r(A+N[4],I*u+O+N[5]),new r(I*l+A+N[6],I*u+O+N[7])];this._drawTriangles(t,B,b)}}},n.prototype._drawTriangles=function(t,i,e){var n=i.width,r=i.height;t.save(),t.beginPath(),t.strokeStyle="yellow",t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[3].x,e[3].y),t.lineTo(e[2].x,e[2].y),t.closePath(),t.clip(),s&&t.stroke();var o=(e[1].x-e[0].x)/n,a=(e[1].y-e[0].y)/n,p=(e[2].x-e[0].x)/r,h=(e[2].y-e[0].y)/r,l=e[0].x,u=e[0].y;t.setTransform(o,a,p,h,l,u),t.drawImage(i,0,0),t.restore(),t.save(),t.beginPath(),t.strokeStyle="red",t.moveTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.lineTo(e[3].x,e[3].y),t.closePath(),t.clip(),s&&t.stroke(),o=(e[3].x-e[2].x)/n,a=(e[3].y-e[2].y)/n,p=(e[3].x-e[1].x)/r,h=(e[3].y-e[1].y)/r,l=e[2].x,u=e[2].y,t.setTransform(o,a,p,h,l,u),t.drawImage(i,0,0-r),t.restore()},i.exports=n},{"./SsPoint":5,"./constant":1}],3:[function(t,i,e){"use strict";function n(t,i,e,n){this._fileRoot=i,this._imagePaths=[],this._images=[],this._onLoadCallBack=n;for(var r=0;r<t.length;r++){var o=this._fileRoot+t[r];this._imagePaths.push(o);var s=new Image;e&&(s.onload=this._onLoad.bind(this),s.src=o),this._images.push(s)}}n.prototype.getImage=function(t){return 0>t||t>=this._images.length?null:this._images[t]},n.prototype.setImage=function(t,i){return 0>t||t>=this._images.length?null:(this._imagePaths[t]=this._fileRoot+i,this._images[t].onload=this._onLoad.bind(this),void(this._images[t].src=this._imagePaths[t]))},n.prototype.setOnLoad=function(t){this._onLoadCallBack=t},n.prototype._onLoad=function(){for(var t in this._images)if(null!==t&&t.complete===!1)return;this._onLoadCallBack&&this._onLoadCallBack()},i.exports=n},{}],4:[function(t,i,e){"use strict";function n(t){this.name=t,this.x=0,this.y=0}i.exports=n},{}],5:[function(t,i,e){"use strict";function n(t,i){this.x=t,this.y=i}i.exports=n},{}],6:[function(t,i,e){"use strict";function n(t){this.x=0,this.y=0,this.flipH=!1,this.flipV=!1,this.rootScaleX=1,this.rootScaleY=1,this.step=1,this.loop=0,this._inner={animation:t,playingFrame:0,prevDrawnTime:0,loopCount:0,endCallBack:null,partStates:null},this._initPartStates()}var r=t("./SsPartState");n.prototype.setAnimation=function(t){this._inner.animation=t,this._initPartStates(),this._inner.playingFrame=0,this._inner.prevDrawnTime=0,this.clearLoopCount()},n.prototype.getAnimation=function(){return this._inner.animation},n.prototype.setFrameNo=function(t){this._inner.playingFrame=t,this._inner.prevDrawnTime=0},n.prototype.getFrameNo=function(){return this._inner.playingFrame>>0},n.prototype.setStep=function(t){this.step=t},n.prototype.getStep=function(){return this.step},n.prototype.setLoop=function(t){0>t||(this.loop=t)},n.prototype.getLoop=function(){return this.loop},n.prototype.getLoopCount=function(){return this._inner.loopCount},n.prototype.clearLoopCount=function(){this._inner.loopCount=0},n.prototype.setEndCallBack=function(t){this._inner.endCallBack=t},n.prototype.getPartState=function(t){if(null===this._inner.partStates)return null;var i=this._inner.animation.getPartsMap(),e=i[t];return e?this._inner.partStates[e]:null},n.prototype.isEndLoop=function(){return 0!==this.loop&&this.loop<=this._inner.loopCount},n.prototype.draw=function(t,i){this._inner.animation&&(this._updatePlayingFrameNo(i),this._inner.prevDrawnTime=i,this._inner.animation.drawFunc(t,this.getFrameNo(),this.x,this.y,this.flipH,this.flipV,this._inner.partStates,this.rootScaleX,this.rootScaleY))},n.prototype._updatePlayingFrameNo=function(t){if(!this.isEndLoop()&&0!==this._inner.prevDrawnTime){var i=this._inner.animation.getFPS()*(t-this._inner.prevDrawnTime)/1e3;this._inner.playingFrame+=i*this.step;var e=this._inner.animation.getFrameCount(),n=this._inner.playingFrame/e>>0;if(this.step>=0)this._inner.playingFrame>=e&&(this._inner.loopCount+=n,this.isEndLoop()?(this._inner.playingFrame=e-1,this._inner.endCallBack&&this._inner.endCallBack()):this._inner.playingFrame%=e);else{if(this._inner.playingFrame>=0)return;this._inner.loopCount+=1+-n,this.isEndLoop()?(this._inner.playingFrame=0,this._inner.endCallBack&&this._inner.endCallBack()):(this._inner.playingFrame%=e,this._inner.playingFrame<0&&(this._inner.playingFrame+=e))}}},n.prototype._initPartStates=function(){if(this._inner.partStates=null,this._inner.animation){this._inner.partStates=[];for(var t=this._inner.animation.getParts(),i=0;i<t.length;i++)this._inner.partStates.push(new r(t[i]))}},i.exports=n},{"./SsPartState":4}],7:[function(t,i,e){"use strict";window.SsImageList=t("./SsImageList"),window.SsAnimation=t("./SsAnimation"),window.SsSprite=t("./SsSprite"),i.exports={SsImageList:window.SsImageList,SsAnimation:window.SsAnimation,SsSprite:window.SsSprite}},{"./SsAnimation":2,"./SsImageList":3,"./SsSprite":6}]},{},[7]);